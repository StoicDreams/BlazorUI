@inherits BUICore

<MudAppBar Class="buiTitleBar" Elevation="1">
	@if (LeftDrawerEnabled)
	{
		<MudIconButton Icon="@LeftDrawerIcon" Color="Color.Inherit" Edge="Edge.Start" OnClick="@ToggleLeftDrawer" />
	}
	<DynamicComponent Type="@HiddenOptions.TitleBarContent" />
	@if (RightDrawerEnabled)
	{
		<MudIconButton Icon="@RightDrawerIcon" Color="Color.Inherit" Edge="Edge.Start" OnClick="@ToggleRightDrawer" />
	}
</MudAppBar>

@code {
	private bool LeftDrawerEnabled => GetState<bool>(AppStateDataTags.LeftDrawerEnabled);
	private bool RightDrawerEnabled => GetState<bool>(AppStateDataTags.RightDrawerEnabled);
	private string LeftDrawerIcon => GetState<string?>(AppStateDataTags.TitleBarLeftDrawerIcon) ?? Icons.Material.Filled.Menu;
	private string RightDrawerIcon => GetState<string?>(AppStateDataTags.TitleBarRightDrawerIcon) ?? Icons.Material.Filled.Menu;

	private void ToggleLeftDrawer()
	{
		AppState.ApplyChanges(() =>
		{
			AppState.SetData(AppStateDataTags.TitleBarLeftDrawerOpen, !AppState.GetData<bool>(AppStateDataTags.TitleBarLeftDrawerOpen));
		});
	}

	private void ToggleRightDrawer()
	{
		AppState.ApplyChanges(() =>
		{
			AppState.SetData(AppStateDataTags.TitleBarRightDrawerOpen, !AppState.GetData<bool>(AppStateDataTags.TitleBarRightDrawerOpen));
		});
	}
}
